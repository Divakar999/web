<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<style>
    body{
        min-height:100vh;
        display:flex;
        align-items:center;
        justify-content:center;
    }
</style>

</head>
<body>


    <h1 class="countdown">10</h1>

    <script>
        function callbackHell(){
        let=countdown=10;
      setTimeout(()=>{
          document.querySelector(".countdown").innerText= --countdown;
        setTimeout(()=>{
             document.querySelector(".countdown").innerText= --countdown;
          setTimeout(()=>{
                document.querySelector(".countdown").innerText= --countdown;
            setTimeout(()=>{
                   document.querySelector(".countdown").innerText= --countdown;
             setTimeout(()=>{
                     document.querySelector(".countdown").innerText= --countdown;
               setTimeout(()=>{
                   document.querySelector(".countdown").innerText= --countdown;
                setTimeout(()=>{
                     document.querySelector(".countdown").innerText= --countdown;
                 setTimeout(()=>{
                       document.querySelector(".countdown").innerText= --countdown;
                  setTimeout(()=>{
                        document.querySelector(".countdown").innerText= --countdown;
                   setTimeout(()=>{
                         document.querySelector(".countdown").innerText= "Happy Independence Day";
                           },1000); 
                          },1000); 
                         },1000);
                       },1000);
                     },1000);
                   },1000);
                },1000);
              },1000);  
            },1000);
          },1000);
        }   
    
        function promiseWay(){
        const msg=(countdown)=>
         new Promise ((resolve,reject)=>{
             if (countdown>=1){
                 setTimeout(()=>{
                     
                    document.querySelector(".countdown").innerText=countdown;
                    resolve(countdown)
                },1000)

             } else {
                 reject(" End");
             }
         });
          
         //chaining
         msg(9)  //9  promise object(9)
         .then(n=>msg(--n)) //8
         .then(n=>msg(--n)) //7
         .then(n=>msg(--n)) //6
         .then(n=>msg(--n)) //5
         .then(n=>msg(--n)) //4
         .then(n=>msg(--n)) //3
         .then(n=>msg(--n)) //2
         .then(n=>msg(--n)) //1
         .then(n=>msg(--n)) 
         .then(
             ()=>console.log("success path"),
             ()=>{
            setTimeout(()=>{
                document.querySelector(".countdown").innerText= "Happy Independence Day";
             },300)
            })
        // .catch(()=>{
        //     setTimeout(()=>{
        //         document.querySelector(".countdown").innerText= "Happy Independence Day";
        //      },300)
        //     })
          
        }
        
        fetch("https://restcountries.com/v3.1/all") //Promise Object
         .then(data=>data.json()) // Data-Response object
         .then((countries)=>
           countries.filter(ctry=>ctry.population>1_00_00_000))
          .then((countries)=>countries.map(ctry=>ctry.name.official))
         .then((result)=>console.log(result))





          fetch("https://restcountries.com/v3.1/all") 
         .then(data=>data.json())
        //  .then((countries)=>countries.filter(ctry=>ctry.population>1_00_00_000))
        //  .then((countries)=>countries.filter(ctry=> ctry.languages && ctry.languages.spa))  // 1st way to get nation who talk spanish
        .then((countries)=>countries.filter(ctry=> ctry.languages ?.spa))    // new ES6-(optional chaining) --->syntax for find lang
          .then((countries)=>countries.map(ctry=>ctry.name.official))
        //  .then((countries)=>console.log(countries));
      
        .then((result)=>console.log(result))

     

         //expexted output
        //  ["India","China","Australia"...]
        //  log countries (only names) with population more than 1 cr
        //lang spanish
    </script>
</body>
</html>